{% extends "base.html" %}

{% block title %}× ×™×”×•×œ ××©×ª××©×™× - Crypto-Class{% endblock %}

{% block content %}
<h1 style="margin-bottom: 1rem; color: #667eea;">ğŸ‘¥ × ×™×”×•×œ ××©×ª××©×™×</h1>

<div style="margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center;">
    <div>
        <p>×¡×”"×› {{ total_users }} ××©×ª××©×™× ×¨×©×•××™× ×‘××¢×¨×›×ª</p>
    </div>
    
    <div style="display: flex; gap: 1rem;">
        <form method="GET" style="display: flex;">
            <input type="text" name="search" value="{{ search }}" placeholder="×—×™×¤×•×© ××©×ª××©..." 
                   style="padding: 0.5rem; border: 2px solid #ddd; border-radius: 5px 0 0 5px; width: 250px;">
            <button type="submit" class="btn btn-primary" style="border-radius: 0 5px 5px 0;">ğŸ” ×—×¤×©</button>
        </form>
    </div>
</div>

<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <th>××©×ª××©</th>
            <th>×˜×œ×’×¨× ID</th>
            <th>×˜×•×§× ×™×</th>
            <th>×¨××”</th>
            <th>×”×¦×˜×¨×£</th>
            <th>×¤×¢×•×œ×•×ª</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users.items %}
        <tr>
            <td>{{ (users.page - 1) * users.per_page + loop.index }}</td>
            <td>
                <strong>{{ user.first_name or "××œ××•× ×™" }}</strong><br>
                <small style="color: #666;">@{{ user.username or "×œ×œ× ×©× ××©×ª××©" }}</small>
            </td>
            <td>{{ user.telegram_id }}</td>
            <td>
                <strong>{{ user.tokens }}</strong><br>
                <small style="color: #666;">×”×¤× ×™×•×ª: {{ user.referral_tokens }}</small>
            </td>
            <td>
                <strong>{{ user.level }}</strong><br>
                <small style="color: #666;">× ×™×¡×™×•×Ÿ: {{ user.experience }}</small>
            </td>
            <td>{{ user.created_at.strftime('%d/%m/%Y') }}</td>
            <td>
                <a href="/teacher/users/{{ user.id }}" class="btn" 
                   style="padding: 0.25rem 0.5rem; font-size: 0.9rem; background: #48bb78; color: white; text-decoration: none;">
                    ×¤×¨×˜×™×
                </a>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="7" style="text-align: center; padding: 3rem;">
                {% if search %}
                ×œ× × ××¦××• ××©×ª××©×™× ×¢×‘×•×¨ "{{ search }}"
                {% else %}
                ××™×Ÿ ××©×ª××©×™× ×¨×©×•××™×
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if users.pages > 1 %}
<div style="display: flex; justify-content: center; gap: 0.5rem; margin-top: 2rem;">
    {% if users.has_prev %}
    <a href="?page={{ users.prev_num }}{% if search %}&search={{ search }}{% endif %}" class="btn btn-primary">â† ×”×§×•×“×</a>
    {% endif %}
    
    <span style="padding: 0.5rem 1rem; background: white; border-radius: 5px;">
        ×¢××•×“ {{ users.page }} ××ª×•×š {{ users.pages }}
    </span>
    
    {% if users.has_next %}
    <a href="?page={{ users.next_num }}{% if search %}&search={{ search }}{% endif %}" class="btn btn-primary">×”×‘× â†’</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
